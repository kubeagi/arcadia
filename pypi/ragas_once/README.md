# Ragas CLI

A one-step Ragas cli tool to evaluate QCAG testsets generated by RAG apps. (Q = Question, C = Contexts, A = Answer, G = Ground_truth)

## DEPRECATED: We moved ragas_once cli tool into agi-core library. Remain here as legacy repo.

## Install with pip

```bash
pip install ragas langchain==0.0.354
```

then:

```bash
pip install ragas_once
```

## Arguments

- `--apibase`: Specifies the base URL for the API.
    - Default value is "https://api.openai.com/v1".
- `--apikey`: Specifies the API key to authenticate requests. 
    - Not required if using psuedo-openai API server, e.g. vLLM, Fastchat, etc.
- `--llm`: Specifies the lllm model to use for evaluation.
    - Default value is "gpt-3.5-turbo". Langchain compatible.
- `--embedding`: Specifies the embeddings model to use for evaluation. 
    - Will use OpenAI embeddings if not set.
- `--metrics`: Specifies the metrics to use for evaluation.
    - Will use Ragas default metrics if not set.
    - Default metrics: `answer_relevancy,context_precision,context_recall,context_relevancy,faithfulness`
    - Other metrics: `"answer_similarity", "answer_correctness"`
- `--dataset`: Specifies the path to the dataset for evaluation.    
    - Dataset format must meet RAGAS requirements.
    - Will use fiqa dataset as demo if not set.

## Usage

### Fiqa dataset demo:

```bash
ro --apikey "YOUR_OPENAI_API_KEY"
```

### Evaluate with another OpenAI Compatible api services

Say you have another openai-compatible api service like [fastchat](https://github.com/lm-sys/FastChat):

- `apibase`: "http://fastchat-api.172.22.96.167.nip.io/v1"
- `apikey`: "fake" 
- `llm`: "9048a24f-b650-4197-be1c-77352bd67ead"  (The unique id of a lllm model)
- `embedding`: "e1c3eed4-4ae1-4afd-98e3-a1bc57136ff7" (The unique id of a embedding model)

```bash
ro --apibase "http://fastchat-api.172.22.96.167.nip.io/v1" --apikey "fake" \
    --llm "9048a24f-b650-4197-be1c-77352bd67ead" --embedding "e1c3eed4-4ae1-4afd-98e3-a1bc57136ff7" --dataset "path/to/dataset.csv"
```

### Prepare Dataset

See [**Ragas documentation**](https://docs.ragas.io/en/stable/howtos/applications/data_preparation.html)